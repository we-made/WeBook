{% extends "arrangement/meta_base.html" %}
{% load crispy_forms_tags %}
{% load static i18n %}


{% block content %}
    <form method="post">

        {% csrf_token %}

        <!-- {{ form | crispyÂ }} -->
        <div class="form-group mb-3">
            <label for="{{ form.name.id_for_label }}" class="h5 d-block fw-bold">
                {{ form.name.label }}
            </label>
            <input type="text" class="form-control form-control-lg"
                id="{{ form.name.id_for_label }}"
                name="{{ form.name.name }}"
                value="{{ form.name.value|default:'' }}">
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.name_en.id_for_label }}" class="h5 d-block fw-bold">
                {{ form.name_en.label }}
            </label>
            <input type="text" class="form-control form-control-lg"
                id="{{ form.name_en.id_for_label }}"
                name="{{ form.name_en.name }}"
                value="{{ form.name_en.value|default:'' }}">
        </div>

        <div class="form-group mb-3">
        <label for="iconPicker">Ikon</label>
        <input type="text"
            name="{{ form.icon_class.name }}"
            value="{{ form.icon_class.value|default:'' }}"
            id="{{form.icon_class.id_for_label}}" />
        </div>
            <div class="mt-3">
                <a class="btn btn-lg btn-danger me-3" onClick="window.history.back(); return false;">
                    {% trans "Cancel" %}
                </a>

                <div class="float-end">

                    {% if not form.instance.id %}
                    <button type="submit" class="btn btn-lg btn-success" value="submitAndNew" name="submitAndNew"
                        data-mdb-toggle="tooltip" title="{% trans 'Save and then create a new audience' %}">
                        {% trans "Save, and new" %}
                    </button>
                    {% endif %}

                    <button type="submit" class="btn btn-lg btn-success" value="submit" name="submit"
                        data-mdb-toggle="tooltip" title="{% trans 'Create a new audience based on your input' %}">
                        {% trans "Save" %}
                    </button>
                </div>
            </div>
    </form>


      <script src="{% static '@fonticonpicker/fonticonpicker/dist/js/jquery.fonticonpicker.min.js' %}"></script>
    <script>

        $(document).ready(function () {
            el = $('#{{form.icon_class.id_for_label}}').fontIconPicker();

            fetch('{% static "fontawesome-icon-manifest_no.json" %}')
                .then(fetchedJson =>  fetchedJson.json())
                .then(parsedJson => el.setIcons( parsedJson ));
        })

    </script>
{% endblock %}
