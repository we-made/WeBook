{% extends "arrangement/meta_base.html" %}
{% load static i18n %}

{% block beneath_breadcrumbs_block %}
    <h3>
    </h3>
    <div class="text-white">
        <div class="row mb-3">
            <div class="col-3">
                <label class="fw-bolder">Arrangement</label>
                <select class="form-control border-dark">
                    <option value="0">{{ object.name }}</option>
                </select>
            </div>
        </div>

        <button class="btn btn-sm btn-success">
            Planlegg nytt arrangement
        </button>
        <button class="btn btn-sm btn-danger">
            Slett dette arrangementet
        </button>
        <button class="btn btn-sm btn-warning">
            Kanseller dette arrangementet
        </button>
    </div>

{% endblock %}

{% block content %}

{% include 'arrangement/planner/plan_arrangement.html' %}
        <div
            class="tab-pane fade"
            id="home1"
            role="tabpanel"
            aria-labelledby="home-tab1">

            <div id="arrangement_calendar"></div>

        </div>

        <!-- TAB: Notes -->
        <div class="tab-pane fade"
             id="home2"
             role="tabpanel"
             aria-labelledby="home-tab2">
            
             <h4>{% trans "Notes" %}</h4>

        </div>

        <div class="tab-pane fade"
             id="home3"
             role="tabpanel"
             aria-labelledby="home-tab3">
        
             
             <h4>{% trans "People" %}</h4>
             <div class="col-lg-3 col-sm-12 col-md-12 border border-1 p-4 mb-3">
                <h5 class="">{% trans "Responsible" %}</h5>
                <h6>{{ object.responsible.full_name }}</h6>
                <button class="btn btn-danger">{% trans "Change Responsible" %}</button>
            </div>
             <p>
                 {% trans "Here you can administer the people that are allowed to edit and work on this arrangement. People added here will automatically be given the watcher status, and will receive notifications, as well as be able to view and make changes according to the authorization level given to them by the arrangement responsible or an administrator." %}
             </p>
             <p>
                 {% trans "Note that the responsible is considered the 'owner' of the event. Only the responsible (and administrators) can authorize new people to access and edit this arrangement." %}
             </p>
            

             <div class="row">
                 <div class="col-lg-6 col-sm-12 col-md-12">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th colspan="3">
                                    <h5 class="d-inline" style="line-height: 36px;">{% trans "People" %}</h5>
                                    <button class="btn btn-link float-end">
                                        <i class="fa fa-user-plus"></i>
                                        {% trans "Add person to this arrangement" %}
                                    </button>
                                </th>
                            </tr>
                            <tr>
                                <th class="h6">{% trans "Person" %}</th>
                                <th class="h6">{% trans "Authorization Level" %}</th>
                                <th class="h6">{% trans "Options" %}</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>{{ object.responsible.full_name }}</td>
                                <td>
                                    <span class="badge badge-secondary">
                                        {% trans "Responsible" %}
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-block btn-sm btn-danger mt-1">
                                        {% trans "Change" %}
                                    </button>
                                </td>
                            </tr>

                            <tr>
                                <td>Ola Nordmann</td>
                                <td>
                                    <span class="badge badge-success">
                                        {% trans "Edit" %}
                                    </span>
                                    <span class="badge badge-info">
                                        {% trans "View" %}
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-block btn-sm btn-danger mt-1">
                                        {% trans "Change" %}
                                    </button>
                                    <button class="btn btn-block btn-sm btn-success mt-1">
                                        {% trans "Authorizations" %}
                                    </button>
                                </td>

                            </tr>
                        </tbody>
                    </table>

                 </div>
             </div>
        </div>

        <div class="tab-pane fade"
            id="home4"
            role="tabpanel"
            aria-labelledby="home-tab4">
        
            <h4>{% trans "Timeline" %}</h4>
            
        </div>
    </div> --> -->


    <!-- Modal -->
<div
    class="modal fade"
    id="colorLegendModal"
    tabindex="-1"
    aria-labelledby="colorLegendModal"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="colorLegendModalLabel">
                <i class="fa fa-info-circle"></i>
                {% trans "Color Legend" %}
            </h5>
            <button
                type="button"
                class="btn-close"
                data-mdb-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table class="table table-sm table-bordered">
                    <thead>
                        <tr class="bg-light">
                            <th class="h6 fw-bold">{% trans "Color" %}</th>
                            <th class="h6 fw-bold">{% trans "Explanation" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="width: 10px">
                                <div style="width:100%; height:20px;" class="bg-success"></div>
                            </td>
                            <td>
                                {% trans "All resources have accepted invitations" %}
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 10px">
                                <div style="width:100%; height:20px;" class="bg-warning"></div>
                            </td>
                            <td>
                                {% trans "There are resources that have not accepted invitations" %}
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 10px">
                                <div style="width:100%; height:20px;" class="bg-danger"></div>
                            </td>
                            <td>
                                {% trans "There are resource(s) that have denied invitations" %}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-light" data-mdb-dismiss="modal">
                <i class="fa fa-times"></i>&nbsp; {% trans "Close" %}
            </button>
            </div>
        </div>
    </div>
</div>

    <!-- Modal -->
<div
    class="modal fade"
    id="iconLegendModal"
    tabindex="-1"
    aria-labelledby="iconLegendModal"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">
                <i class="fa fa-info-circle"></i>
                {% trans "Icon Legend" %}
            </h5>
            <button
                type="button"
                class="btn-close"
                data-mdb-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table class="table table-sm table-bordered">
                    <thead>
                        <tr class="bg-light">
                            <th class="h6 fw-bold">{% trans "Icon" %}</th>
                            <th class="h6 fw-bold">{% trans "Explanation" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="width: 10px;" class="text-center">
                                <i class="fa fa-check text-success fw-bold"></i>
                            </td>
                            <td>
                                {% trans "Based on the system rules this event is configured fully" %}
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 10px;" class="text-center">
                                <i class="fa fa-exclamation-triangle text-warning fw-bold"></i>
                            </td>
                            <td>
                                {% trans "An alert has been triggered on this event. You should check the notification" %}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-light" data-mdb-dismiss="modal">
                <i class="fa fa-times"></i>&nbsp; {% trans "Close" %}
            </button>
            </div>
        </div>
    </div>
</div>

{% include 'arrangement/requisitioneer/requisition_dialog.html' %}

    <script>


    // DOM element where the Timeline will be attached
    var container = document.getElementById('visualization');

    // Create a DataSet (allows two way data-binding)
    var items = new vis.DataSet([
    {id: 1, content: 'Event A', className:"bg-info text-white", start: '2022-04-20'},
    {id: 2, content: 'Event B', className:"bg-danger text-white", start: '2022-04-14'},
    {id: 3, content: 'Event C', start: '2022-04-18'},
    {id: 4, content: 'Event D', start: '2022-04-16', end: '2022-04-19'},
    {id: 5, content: 'Event E', start: '2022-04-25'},
    {id: 6, content: 'Event F', start: '2022-04-27'}
    ]);

    // Configuration for the Timeline
    var options = {};

    // Create a Timeline
    var timeline = new vis.Timeline(container, items, options);

    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('arrangement_calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'resourceTimelineMonth',
            height: 600,
            navLinks:true,
        });

        calendar.render();
    });
    </script>
{% endblock %}